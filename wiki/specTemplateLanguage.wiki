#summary A specification for integrating Twig into Mortar
#labels Specification

= Introduction =

Mortar is going to rely on the [http://www.twig-project.org/ Twig] template system for the logic behind templates. This enables us to give powerful, yet fast, options to designers.

The purpose of this document is to design how we are going to utilize and extend Twig to suite the needs of Mortar.

= Integration =

The actual interface/api for how developers will interact with Twig is still up in the air. A custom loader is a given, since Mortar already has a system for loading templates.

Error handling has been managed by defining the "!Twig_Error" class as an extension of !CoreError.

The Autoloader now has a function for loading external classes and the !Twig_Autoloader class has been integrated into that.

= Extensions =

Twig extensions are enhancements to the language itself. These are still being defined.

== Environment ==

This is probably the most simple of the extensions. Its basically going to expose environmental variables to the templates.

=== Variables ===

  * Site Name
  * Active User Name
  * Path data (such as the path to the theme files)

== Date/Time ==

Various date and time functions should be exposed to templates. This extension is not really Mortar specific and should be shared back with Twig. Formatting is already handled by Twig.

=== Variables ===

  * Current TIme
  * Current Timezone

=== Expressions ===

I'm not sure how feasible this is, but I'd like to be able to use expressions (addition, subtraction, comparison, etc) on date and time objects. I'm thinking the easiest way to do this would be to store them as timestamps until they're displayed.

== Models ==

The goal of this extension is to expose the content and properties of models to designers. This should include locations for models that use them.

== Urls ==

This extension should provide designers with a simple way to manage Urls. Url attributes should be accessible as variable attributes for both accessing and changing.

=== Variables ===

  * Current URL
  * Site URL

=== Tags ===

  * New URL

== Multilingual Support ==

 * Ability to switch between languages for displayed text.