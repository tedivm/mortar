#summary A specification for logic/design decisions in the template engine.
#labels Specification

= Introduction =


= Details =


Here is a brainstormed and completely non-binding list of tags that the language should support:

===Page Segments===

{# head #}
- Retrieves the HTML head, complete with all relevant information provided by the system.

{# footer #}
- Retrieves footer content.

{# menu @1 #}
- Retrieves the HTML contents of the menu or sidebar designated by @1, in _ul_ form.

===Location Content===

{# posts @1 @2 etc. #}
- Retrieves X posts from the current location, with optional filters, and displays each in template @1. (Maybe have a capture -> dupe mechanism for this?)

{# query_posts @1 @2 etc. #}
- Retrieves posts from anywhere, based on a list of filter/search criteria, and displays each in template (as above).

===Model Content===

{# model_name #}

{# model_title #}

{# model_content #}

{# model_owner #}

{# model_type #}

{# model_creationTime #}

{# model_lastModified #}

{# model_actions #}

(These elements are currently supplied by ModelToHtml.)

{# model_tags #}

{# model_status #}

{# model_propertyX #}

(These elements _should_ be supplied by ModelToHtml eventually.)

===Navigation===

{# next @1 @2 etc. #}
-Returns the URL for the "next" item. (By default the next item by date with the same parent, but can be filtered or expanded by args.)

{# prev @1 @2 etc. #}
-Returns the URL for the "previous" item. (By default the previous item by date with the same parent, but can be filtered or expanded by args.)

{# first @1 @2 etc. #}
-Returns the URL for the "first" item. (By default the first item by date with the same parent, but can be filtered or expanded by args.)

{# last @1 @2 etc. #}
-Returns the URL for the "last" item. (By default the last item by date with the same parent, but can be filtered or expanded by args.)

===Local Info===

{# current_url #}
- The fully-qualified, canonical URL for the resource currently being viewed.

===Site Info===

{# site_name #}
- Name of the current site.

{# site_url #}
- The fully-qualified, canonical URL for the root of the current site.

===Theme Info===

{# theme_name #}
- Name of the theme used to render the current page.

{# theme_url #}
- The fully-qualified, canonical URL for the home directory of the current display theme.

{# theme_setting @1 @2 etc... #}
- The value of a setting from the theme's settings.ini file.

===Feeds===

{# feed @1 etc. #}
- Link to the root site feed, with optional filters.

{# feed_loc @1 @2 etc. #}
- Link to the feed for content located at @1, with optional filters. 

===Gallery/Media===

{# image @1 #}

Retrieves the URL for the image specified by @1 from the gallery

===Meta===

{# login #}
-Displays currently logged in user, or login box if no user is logged in.

===Logic===

{# %+ #} {# %- #} {# %* #} {# %/ #}
- Perform basic mathematical operations on individual arguments OR template text.

{# and #} {# or #} {# not #} {# equals #}
- Perform comparison or basic logical operators on individual arguments OR template text.

{# if @1 #} {# then @2 #} {# elseif @3 #} {# then @4 #} {# else @5 #}

{# switch @1 #} {# case @2 #} {# case @3 #} etc.
-Basic conditional template switching

{# foreach @1 as @2 #}
-Looping over a set of arguments

{# grab @1 #} {## grab ##}

{# release @1 #}
-Assign a portion of template text into a variable which can be released at a further downwards point, by name.

===Presentation===

{# textcase @1=(upper, lower, first, camel, etc.) #} {## case ##}
-Alter the case of the contained text

{# tonum @1 #}
{# tospell @1 #}
- Convert a written-out number to a numerical form or vice-versa, with settings.